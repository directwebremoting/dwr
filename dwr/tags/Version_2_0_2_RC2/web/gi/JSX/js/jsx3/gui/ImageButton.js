/*
 * Copyright (c) 2001-2007, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 */
jsx3.require("jsx3.gui.Form","jsx3.gui.Block");jsx3.Class.defineClass("jsx3.gui.ImageButton",jsx3.gui.Block,[jsx3.gui.Form],function(p,n){var Vb=jsx3.gui.Event;var Zb=jsx3.gui.Interactive;var gb=jsx3.gui.Form;p.TYPE_NORMAL=0;p.TYPE_TOGGLE=1;p.STATE_OFF=0;p.STATE_ON=1;n.jsximage=null;n.jsxoverimage=null;n.jsxdownimage=null;n.jsxonimage=null;n.jsxdisabledimage=null;n.jsxprefetch=jsx3.Boolean.TRUE;n.jsxtype=p.TYPE_NORMAL;n.jsxstate=p.STATE_OFF;n._jsxtf=null;n.init=function(g,k,f,l,i){this.jsxsuper(g,k,f,l,i);};n.getImage=function(){return this.jsximage;};n.setImage=function(m){this.jsximage=m;return this;};n.getOverImage=function(){return this.jsxoverimage;};n.setOverImage=function(r){this.jsxoverimage=r;return this;};n.getDownImage=function(){return this.jsxdownimage;};n.setDownImage=function(k){this.jsxdownimage=k;return this;};n.getOnImage=function(){return this.jsxonimage;};n.setOnImage=function(l){this.jsxonimage=l;return this;};n.getDisabledImage=function(){return this.jsxdisabledimage;};n.setDisabledImage=function(s){this.jsxdisabledimage=s;return this;};n.getState=function(){return this.jsxstate;};n.setState=function(h){this.jsxstate=h;var eb=this.getRendered();if(eb!=null)eb.src=this.go(false,false);return this;};n.getType=function(){return this.jsxtype;};n.setType=function(g){this.jsxtype=g;return this;};n.isPreFetch=function(){return this.jsxprefetch;};n.setPreFetch=function(r){this.jsxprefetch=jsx3.Boolean.valueOf(r);return this;};n.setEnabled=function(j,q){if(this._jsxtf!=null)this._jsxtf.setEnabled(j==gb.STATEENABLED);return this.jsxsupermix(j,q);};p.s5={};p.s5[Vb.CLICK]=true;p.s5[Vb.MOUSEOVER]=true;p.s5[Vb.MOUSEOUT]=true;p.s5[Vb.MOUSEDOWN]=true;p.s5[Vb.MOUSEUP]=true;p.s5[Vb.KEYDOWN]=true;n.paint=function(){this.applyDynamicProperties();var Yb=this.getEnabled()==gb.STATEENABLED;var w=this.getKeyBinding();if(w){var Mb=this;if(this._jsxtf!=null)this._jsxtf.destroy();this._jsxtf=this.doKeyBinding(function(g){Mb._doClick(g,Mb.getRendered());},w);this._jsxtf.setEnabled(Yb);}var ic=this.lM(Yb?p.s5:null,0);var vc=this.renderAttributes(null,true);var E=this.RL(true);E.setAttributes("id=\""+this.getId()+"\" label=\""+this.getName()+"\""+this.CI()+this.vH()+" class=\""+(Yb?"jsx30imagebutton":"jsx30imagebutton_disabled")+"\""+ic+vc);E.setStyles(this.I6()+this.T1()+this.MU()+this.d9()+this.UZ()+this.iN());var ec=E.XK();ec=ec!=null?" width=\""+ec+"\"":"";var sb=E.P5();sb=sb!=null?" height=\""+sb+"\"":"";var x="<img src=\""+this.go(false,false)+"\""+ec+sb+"/>";if(!this._jsxZA&&this.isPreFetch()){var ab=this.getUriResolver();var Hc=[this.getImage(),this.getOverImage(),this.getDownImage(),this.getOnImage(),this.getDisabledImage()].map(function(k){return k?ab.resolveURI(k):null;});jsx3.html.loadImages(Hc);this._jsxZA=true;}var T=E.pQ(0);return E.paint().join(T.paint().join(x));};n.T5=function(){var x=this.getRelativePosition()!=0;var u={};if(!x&&!jsx3.util.strEmpty(this.getLeft()))u.left=this.getLeft();if(!x&&!jsx3.util.strEmpty(this.getTop()))u.top=this.getTop();if(!(this.getWidth()==null||isNaN(this.getWidth())))u.width=this.getWidth();if(!(this.getHeight()==null||isNaN(this.getHeight())))u.height=this.getHeight();u.tagname="span";u.boxtype=x||u.left==null||u.top==null?"relativebox":"box";if(this.getPadding()!=null)u.padding=this.getPadding();if(x&&this.getMargin()!=null)u.margin=this.getMargin();if(this.getBorder()!=null)u.border=this.getBorder();var V=new jsx3.gui.Painted.Box(u);u={tagname:"div",boxtype:"inline",height:V.P5()};V.W8(new jsx3.gui.Painted.Box(u));return V;};n.k7=function(a,q,s){this.B_(a,q,s,1);};n.go=function(j,d){var ic=null;if(this.getEnabled()==gb.STATEENABLED){if(j)ic=this.getOverImage();else{if(d)ic=this.getDownImage();}if(this.getType()==p.TYPE_TOGGLE&&this.getState()==p.STATE_ON)ic=ic||this.getOnImage();}else{ic=this.getDisabledImage();}ic=ic||this.getImage();return ic?this.getUriResolver().resolveURI(ic):"";};n.IU=function(c,j){if(!c.leftButton()&&c.isMouseEvent())return;if(this.getType()==p.TYPE_TOGGLE){var Ob=this.getState()==p.STATE_OFF?p.STATE_ON:p.STATE_OFF;var lc=this.doEvent(Zb.TOGGLE,{objEVENT:c,intSTATE:Ob});if(lc!==false){this.setState(Ob);j.childNodes[0].childNodes[0].src=this.go(false,false);}}this.doEvent(Zb.EXECUTE,{objEVENT:c});};n.CL=function(m,s){s.childNodes[0].childNodes[0].src=this.go(true,false);};n.u2=function(j,c){c.childNodes[0].childNodes[0].src=this.go(false,false);};n.mL=function(m,s){if(m.leftButton())s.childNodes[0].childNodes[0].src=this.go(false,true);};n._4=function(j,c){if(j.rightButton())this.jsxsupermix(j,c);else{if(j.leftButton())c.childNodes[0].childNodes[0].src=this.go(false,false);}};n.DY=function(i,d){if(i.enterKey()||i.spaceKey()){this.IU(i,d);i.cancelAll();}};n.doValidate=function(){var Z=null;if(this.getType()==p.NORMAL)Z=gb.STATEVALID;else Z=this.getState()==p.STATE_ON||this.getRequired()==gb.OPTIONAL?gb.STATEVALID:gb.STATEINVALID;this.setValidationState(Z);return Z;};n.emGetType=function(){return jsx3.gui.Matrix.EditMask.FORMAT;};n.emInit=function(c){this.jsxsupermix(c);};n.emSetValue=function(b){};n.emGetValue=function(){return null;};n.emBeginEdit=function(h,g,l,m,q,a,e){var G=e.childNodes[0].childNodes[0];if(G){this.jsxsupermix(h,g,l,m,q,a,e);G.focus();}else{return false;}};n.emPaintTemplate=function(){this.setEnabled(gb.STATEDISABLED);var Tb=this.paint();this.setEnabled(gb.STATEENABLED);var Pb=this.paint();return this.PS(Pb,Tb);};});
