<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Hub Demo</title>
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
  <script type='text/javascript' src='../tabs/tabs.js'> </script>
  <script type='text/javascript' src='../dwr/engine.js'> </script>
  <script type='text/javascript' src='../dwr/util.js'> </script>
  <script type='text/javascript' src='../dwr/interface/HubTest.js'> </script>
  <script type="text/javascript" src='index.js'> </script>
  <link rel="stylesheet" type="text/css" href="../tabs/tabs.css" />
  <link rel="stylesheet" type="text/css" href="../generic.css" />
</head>
<body onload="init();">
<div id="page-title">[
  <a href="http://getahead.org/dwr/">DWR Website</a> |
  <a href="..">Web Application Index</a>
]</div>

<h1>Publish and Subscribe</h1>

<p>This demo allows you publish and subscribe to a topic on the DWR hub.</p>

<ul id="tabList">
  <li><a href="#" tabId="demoDiv">Demo</a></li>
  <li><a href="#" tabId="explainDiv">How it works</a></li>
  <li><a href="#" tabId="sourceDiv">Source</a></li>
</ul>

<div id="tabContents">

  <div id="demoDiv">

    <h3>Client Publish</h3>
    <p>These 2 examples publish data into the client hub, one pushing simple
    text, and the other pushing a 'Person' object created with a given name.</p>
    <p>Publish text:
    <input type="text" id="clientText" onchange="dwr.util.onReturn(event, clientPublishText)"/>
    <input type="button" onclick="clientPublishText()" value="Publish Text"/></p>
    <p>Person name:
    <input type="text" id="clientPersonName" onchange="dwr.util.onReturn(clientPublishObject)"/>
    <input type="button" onclick="clientPublishObject()" value="Publish Object"/></p>

    <h3>Server Publish</h3>
    <p>These 2 examples request the server to publish data into the server hub,
    as above, one pushing text and the other an object.</p>
    <p>Publish text:
    <input type="text" id="serverText" onchange="dwr.util.onReturn(event, serverPublishText)"/>
    <input type="button" onclick="serverPublishText()" value="Publish Text"/></p>
    <p>Person name:
    <input type="text" id="serverPersonName" onchange="dwr.util.onReturn(serverPublishObject)"/>
    <input type="button" onclick="serverPublishObject()" value="Publish Object"/></p>

    <h3>Subscriptions</h3>
    <div id="lazy">See the console</div>

  </div>

  <div id="explainDiv">
    <h2>Creating the table</h2>
    <p>This demo introduces a number of features, some of which are new to
    DWR 2.0.</p>
    <p>When the page first loads, the onload event calls the server-side
    <code>People.getAllPeople()</code> function to return an array of people
    objects.</p>
    <p>A Person is just a POJO containing an name and address fields along with
    a salary as a float and an id as an int. Full details of the Java source
    are shown on the "Source" tab.</p>
    <p>The Javascript uses the <code>cloneNode()</code> feature to create a row
    in a table for each returned person. So for each person we do this:</p>

<pre>
dwr.util.cloneNode("pattern", { idSuffix:person.id });
</pre>

  </div>

  <div id="sourceDiv">

<h2>HTML source:</h2>
<pre>
</pre>

<h2>Javascript source:</h2>
<pre>
</pre>

<h2>Java source:</h2>
<pre>
</pre>

<h2>dwr.xml</h2>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE dwr PUBLIC
    "-//GetAhead Limited//DTD Direct Web Remoting 2.0//EN"
    "http://getahead.org/dwr/dwr20.dtd"&gt;

&lt;dwr&gt;
  &lt;allow&gt;
    &lt;create creator="new" javascript="People" scope="script"&gt;
      &lt;param name="class" value="org.getahead.dwrdemo.people.People"/&gt;
    &lt;/create&gt;
    &lt;convert match="org.getahead.dwrdemo.people.Person" converter="bean"/&gt;
  &lt;/allow&gt;
&lt;/dwr&gt;
</pre>

  </div>

</div>

</body>
</html>
