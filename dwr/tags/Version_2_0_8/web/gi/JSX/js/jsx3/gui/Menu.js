/*
 * Copyright (c) 2001-2007, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 */
jsx3.require("jsx3.xml.Cacheable","jsx3.gui.Form","jsx3.gui.Heavyweight","jsx3.gui.Block","jsx3.gui.ToolbarButton");jsx3.Class.defineClass("jsx3.gui.Menu",jsx3.gui.Block,[jsx3.xml.Cacheable,jsx3.xml.CDF,jsx3.gui.Form],function(p,q){var T=jsx3.gui.Event;var sc=jsx3.gui.Interactive;p.DEFAULTBACKGROUND="background-image:url("+jsx3.resolveURI("jsx:///images/menu/bg.gif")+");backround-repeat:repeat-y;";p.DEFAULTBACKGROUNDCOLOR="#ffffff";p.DEFAULTXSLURL=jsx3.resolveURI("jsx:///xsl/jsxmenu.xsl");p.DEFAULTXSLCACHEID="JSX_MENU_XSL";p.DEFAULTCONTEXTLEFTOFFSET=12;p.NODATAMESSAGE="<div tabIndex ='0' class='jsx30menu_0_itemlist' onmousedown='var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();'>- no data -</div>";p.VB=new jsx3.util.MessageFormat("<div tabIndex=\"0\" class=\"{0}\" onmousedown=\"var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();\">{1}</div>");p.AA=0;p.Ww=1;p.zl=12;p.Yg=jsx3.resolveURI("jsx:///images/menu/submenuarrow.gif");p.Km=jsx3.resolveURI("jsx:///images/menu/selectover.gif");p.at=jsx3.resolveURI("jsx:///images/menu/selected.gif");p.qm=jsx3.resolveURI("jsx:///images/menu/down_menu.gif");p.bu=jsx3.resolveURI("jsx:///images/menu/off_menu.gif");p.bf=jsx3.resolveURI("jsx:///images/menu/on_menu.gif");p.oq=jsx3.resolveURI("jsx:///images/menu/over_menu.gif");p.uE=jsx3.resolveURI("jsx:///images/tbb/down.gif");p.Ky=jsx3.resolveURI("jsx:///images/tbb/on.gif");p.dv="#9B9BB7";jsx3.html.loadImages("jsx:///images/menu/bg.gif",p.qm,p.bu,p.bf,p.oq,p.at,p.Km,p.Yg,p.uE,p.Ky);p.vt=null;p.Te=[];p.Sp=null;p.np=null;p.Ps=null;p.ou=250;p._n=150;p.ef="jsx30curvisiblemenu_";p.Xz=1000;q.init=function(c,l){this.jsxsuper(c);if(l!=null)this.setText(l);};q.getImage=function(){return this.jsximage!=null&&this.jsximage.trim()!=""?this.jsximage:null;};q.setImage=function(g){this.jsximage=g;return this;};q.getXSL=function(){var wc=this.jsxsupermix(true);return wc||this.getServer().getCache().getOrOpenDocument(p.DEFAULTXSLURL,p.DEFAULTXSLCACHEID);};q.disableItem=function(r){return this.enableItem(r,false);};q.enableItem=function(b,g){delete this._jsxLm;if(g||g==null)this.deleteRecordProperty(b,"jsxdisabled",false);else this.insertRecordProperty(b,"jsxdisabled","1",false);return this;};q.isItemEnabled=function(n){var tc=this.getRecordNode(n);return tc!=null&&tc.getAttribute("jsxdisabled")!="1";};q.selectItem=function(f,n){delete this._jsxLm;if(n||n==null){var ab=this.getRecordNode(f);if(ab!=null){var ec=ab.getAttribute("jsxgroupname");if(ec){var H=this.getXML().selectNodes("//record[@jsxgroupname='"+ec+"']");for(var yc=0;yc<H.getLength();yc++){var hb=H.getItem(yc);if(hb.getAttribute("jsxid")!=f)H.getItem(yc).removeAttribute("jsxselected");}}}this.insertRecordProperty(f,"jsxselected",1,false);}else{this.deleteRecordProperty(f,"jsxselected",false);}return this;};q.deselectItem=function(d){return this.selectItem(d,false);};q.isItemSelected=function(e){var fc=this.getRecordNode(e);return fc!=null&&fc.getAttribute("jsxselected")=="1";};q.doFocus=function(j,c,h){if(c.getAttribute("jsxtype")!="Disabled"){var dc=c.getAttribute("jsxid");var S=this.Pc(dc);if(!S)this.AE(h);c.style.backgroundImage="url("+p.Km+")";if(!S)c.focus();}};q.AE=function(n){if(p.Te.length>n&&(p.FD==null||p.FD>n)){if(p.Ps)window.clearTimeout(p.Ps);this.ky(n,null);p.FD=n;var N=this;p.Ps=window.setTimeout(function(){if(N.getParent()==null)return;p.Ps=null;p.FD=null;N.sj(n+1,true);},p._n);}};q.doBlur=function(j,o){if(j!=null&&j.isFakeOut(o))return;if(o.getAttribute("jsxtype")!="Disabled"&&!this.Pc(o.getAttribute("jsxid"))){o.style.backgroundImage="url("+jsx3.gui.Block.SPACE+")";}};q.Pc=function(k){if(this._jsxxh)return this._jsxxh.indexOf(k)>=0;return false;};q.ky=function(b,c){if(b<1)return;if(this._jsxxh==null)this._jsxxh=[];if(c==null){var Ib=this._jsxxh[b-1];this._jsxxh.splice(b-1,this._jsxxh.length);if(Ib){var y=p.Te[b-1];if(y!=null){var ic=y.getRendered().childNodes[0].childNodes;for(var Ic=0;Ic<ic.length;Ic++){if(ic[Ic].getAttribute("jsxid")==Ib){this.doBlur(null,ic[Ic]);}}}}}else{this._jsxxh.splice(b-1,this._jsxxh.length,c);}};q.DY=function(i,d){if(this.jsxsupermix(i,d))return;if(i.downArrow()&&!i.hasModifier()){this.showMenu(i,d,1);i.cancelAll();}};q.M0=function(r){if(r.spaceKey()||r.enterKey()){r.cancelAll();}};q.mL=function(b,k){if(!b.leftButton())return;this.bA(b,k);k.childNodes[2].style.backgroundImage="url("+p.qm+")";if(this.getState()==p.Ww){if(!this._jsxTG)this.sj();}else{this.showMenu(b,k,1);}};q.CL=function(j,c){if(j.isFakeOver(c))return;if(p.np){window.clearTimeout(p.np);p.np=null;}this.zg(j,c);if(this.getState()==p.AA){c.childNodes[2].style.backgroundImage="url("+p.oq+")";}if(p.vt!=null&&this!=p.vt&&p.vt.getParent()==this.getParent()||jsx3.EventHelp.FLAG==1&&this.getCanDrop()==1)this.showMenu(j,c,1);};q.u2=function(i,d){if(i.isFakeOut(d))return;if(p.np){window.clearTimeout(p.np);p.np=null;}if(this.getState()==p.AA||d!=this._jsxds[0]){this.Vu(i,d);d.childNodes[2].style.backgroundImage="url("+p.bu+")";}};q.df=function(d,i){if(d.hasModifier())return;var F=Number(i.getAttribute("intINDEX"));var Jc=d.srcElement();var w=Jc.getAttribute("jsxtype");if((d.spaceKey()||d.enterKey())&&w!="Disabled"&&typeof(w)!="undefined"){this.Jx(d,Jc.getAttribute("jsxid"));this.sj();}else{if(d.rightArrow()&&w=="Book"){this.showMenu(d,Jc,F+1,Jc.getAttribute("jsxid"));}else{if(d.leftArrow()){this.sj(F);}else{if(d.escapeKey()){this.sj();}else{if(d.downArrow()){var tb=Jc;do{if(tb==tb.parentNode.lastChild){tb=tb.parentNode.firstChild;}else{tb=tb.nextSibling;}}while(tb.getAttribute("jsxdiv")!=null&&tb!=Jc);tb.focus();}else{if(d.upArrow()){var tb=Jc;do{if(tb==tb.parentNode.firstChild){tb=tb.parentNode.lastChild;}else{tb=tb.previousSibling;}}while(tb.getAttribute("jsxdiv")!=null&&tb!=Jc);tb.focus();}else{return;}}}}}}d.cancelAll();};q.Lk=function(a,l){if(!a.leftButton()){a.cancelBubble();return;}var Jb=Number(l.getAttribute("intINDEX"));var x=a.srcElement();var fb=x.getAttribute("jsxtype")=="Book"?x:x.parentNode;if(fb.getAttribute("jsxtype")=="Book")this.showMenu(a,fb,Jb+1,fb.getAttribute("jsxid"));if(this.getCanDrag()==1&&x.getAttribute("JSXDragType")!=null&&!a.rightButton()){this.doDrag(a,x,p.getDragIcon);}a.cancelBubble();};q.Vp=function(n,r){if(!n.leftButton()){n.cancelBubble();return;}var zb=Number(r.getAttribute("intINDEX"));if(this.getCanDrop()==1&&jsx3.EventHelp.isDragging()&&jsx3.EventHelp.DRAGTYPE=="JSX_GENERIC"){var N=n.srcElement();while(N!=null&&!N.getAttribute("jsxtype"))N=N.parentNode;if(N!=null&&N.getAttribute("jsxtype")!="disabled"){var ab=jsx3.EventHelp.JSXID.getId();var rc=jsx3.EventHelp.DRAGID;var Nc=jsx3.EventHelp.DRAGTYPE;var Gc=N.jsxid;var S=jsx3.GO(ab);if(S==null)return;var M=jsx3.gui.isMouseEventModKey(n);var U=S.doEvent(sc.ADOPT,{objEVENT:n,strRECORDID:rc,objTARGET:this,bCONTROL:M});var Mc={objEVENT:n,objSOURCE:S,strDRAGID:rc,strDRAGTYPE:jsx3.EventHelp.DRAGTYPE,strRECORDID:Gc,bALLOWADOPT:U!==false};var L=this.doEvent(M?sc.CTRL_DROP:sc.DROP,Mc);jsx3.EventHelp.reset();if(U!==false&&L!==false&&S.instanceOf(jsx3.xml.CDF))this.adoptRecord(S,rc,Gc);}}};p.getDragIcon=function(o,k,d,r){return "<span id='JSX' style='font-family:Verdana;font-size:10px;padding:0px;height:24px;padding:2px;width:200px;overflow:hidden;text-overflow:ellipsis;color:#a8a8a8;filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=1, StartColorStr=#eedfdfe8, EndColorStr=#00ffffff);'><nobr>"+jsx3.html.getOuterHTML(o.parentNode).doReplace("BACKGROUND-IMAGE","")+"</nobr></span>";};q.wo=function(e,h){if(p.np){window.clearTimeout(p.np);p.np=null;}var nb=null;var O=e.srcElement();while(O!=null&&O.getAttribute("jsxtype")==null){O=O.parentNode;if(O==h||O==h.ownerDocument)O=null;}if(O!=null&&O.getAttribute("jsxtype")=="Book"){nb=O.getAttribute("jsxid");if(!this.Pc(nb)){var Hc=h;while(Hc!=null&&Hc.getAttribute("intINDEX")==null)Hc=Hc.parentNode;var Dc=Hc!=null?Number(Hc.getAttribute("intINDEX")):null;if(Dc!=null){var ub=this;e._0();p.np=window.setTimeout(function(){if(ub.getParent()==null)return;p.np=null;ub.showMenu(e,O,Dc+1,nb);},p.ou);}}}else{var Hc=h;while(Hc!=null&&Hc.getAttribute("intINDEX")==null)Hc=Hc.parentNode;var U=Hc!=null?Number(Hc.getAttribute("intINDEX")):null;if(U>0)this.AE(U);}if(nb==null){if((O=e.srcElement()).jsxid||(O=e.srcElement().parentNode).jsxid)nb=O.getAttribute("jsxid");}if(nb!=null)this.Ft(e,nb,O.getAttribute("jsxtype")=="Book");};q.Ft=function(h,r,o){if(this.getEvent(sc.SPYGLASS)){var Mc=h.clientX()+jsx3.EventHelp.DEFAULTSPYLEFTOFFSET;var Bb=h.clientY()+jsx3.EventHelp.DEFAULTSPYTOPOFFSET;var S=this;p.ri=window.setTimeout(function(){if(S.getParent()==null)return;p.ri=null;var J=S.doEvent(sc.SPYGLASS,{objEVENT:h,strRECORDID:r});if(J){jsx3.gui.Interactive.hideSpy();S.showSpy(J,Mc,Bb);}},o?p.Xz:jsx3.EventHelp.Xz);}};p.QE=function(){if(p.ri){window.clearTimeout(p.ri);p.ri=null;}jsx3.gui.Interactive.hideSpy();};q.hk=function(e,h){if(p.np){window.clearTimeout(p.np);p.np=null;}p.QE();};q.Vg=function(j,c){if(!j.leftButton()){j.cancelBubble();return;}var G=j.srcElement();while(G!=null&&!G.getAttribute("jsxid")){G=G.parentNode;if(G==c||G==c.ownerDocument)G=null;}if(G!=null){var Ec=G.getAttribute("jsxtype");if(Ec!="Book"&&Ec!="Disabled"){this.Jx(j,G.getAttribute("jsxid"));this.sj();}}};p._u=function(l){for(var N=p.Te.length-1;N>=l-1;N--)p.Te[N].destroy();p.Te.splice(l-1,p.Te.length);};q.sj=function(a,g){if(a==null)a=1;if(this==p.vt){if(p.Ps)window.clearTimeout(p.Ps);p.QE();this.ky(a-1,null);p._u(a);if(a==1){this.Vf(p.AA);this.doEvent(sc.HIDE);p.vt=null;p.fx=false;T.unsubscribe(T.MOUSEDOWN,p.fr);}if(!g){try{if(this._jsxds[a-1])this._jsxds[a-1].focus();else{if(a==1)this.focus();}}catch(Kc){}}this._jsxds.splice(a-1,this._jsxds.length);}};p.fr=function(r){if(p.vt!=null)p.vt.sj();};q.showContextMenu=function(n,k,l,d){p.fx=true;this._jsx_u=k;this._jsxfd=l;this.showMenu(n,null,1,null,d);};q.getContextParent=function(){return this._jsx_u;};q.getContextRecordId=function(){return this._jsxfd;};q.showMenu=function(f,j,k,l,o){var Eb=this.doEvent(sc.MENU,{objEVENT:f,objANCHOR:j,intINDEX:k,strPARENTID:l});if(Eb===false)return;if(j==null&&l!=null){j=this.getRendered(f);}if(k==1){this._jsxTG=true;if(p.vt!=null&&p.vt!=this){p.vt.sj(1,true);}p.vt=this;}f._0();jsx3.sleep(function(){this.dB(f,j,k,l,o);},"Menu.showTopMenu",this,true);if(this._jsxds==null)this._jsxds=[];};q.dB=function(d,s,g,b,f){this._jsxds[g-1]=s;this.ky(g,b);var Ub=p.ef+g;var tb=this.Mn(false,b,g);var Qb="jsx30menu_"+jsx3.html.getMode()+"_itemlist";var Hb="<span intINDEX=\""+g+"\""+this.RX(T.MOUSEOVER,"wo")+this.RX(T.MOUSEOUT,"hk")+this.RX(T.KEYDOWN,"df")+this.RX(T.CLICK,"Vg")+this.RX(T.MOUSEDOWN,"Lk")+this.RX(T.MOUSEUP,"Vp")+" class=\""+Qb+"\" style=\""+this.UZ()+this.K2()+"\">"+tb+"</span>";var Tb=p.Te[g-1];if(Tb)Tb.destroy();var Xb=p.Te[g-1]=new jsx3.gui.Heavyweight(Ub,this);Xb.setHTML(Hb);var xb=this.getHeight();var _b=this.getWidth();if(xb)Xb.setHeight(xb);if(_b)Xb.setWidth(_b);if(s&&b!=null){Xb.addXRule(s,"E","W",-6);Xb.addXRule(s,"E","E",-60);Xb.addYRule(s,"N","N",0);Xb.addYRule(s,"N","N",6);}else{if(s){Xb.addXRule(s,"W","W",-2);Xb.addRule(null,"W",0,"X");Xb.addYRule(s,"S","N",0);Xb.addYRule(s,"N","S",0);}else{if(f){Xb.addXRule(f.L,null,"W",p.DEFAULTCONTEXTLEFTOFFSET);Xb.addXRule(f.L,null,"E",-p.DEFAULTCONTEXTLEFTOFFSET);Xb.addYRule(f.T,null,"N",p.zl);Xb.addYRule(f.T,null,"S",-p.zl);}else{Xb.addXRule(d,null,"W",p.DEFAULTCONTEXTLEFTOFFSET);Xb.addXRule(d,null,"E",-p.DEFAULTCONTEXTLEFTOFFSET);Xb.addYRule(d,null,"N",p.zl);Xb.addYRule(d,null,"S",-p.zl);}}}if(g==1&&!p.fx)this.Vf(p.Ww,s);Xb.show();var Jb=Xb.getRendered(s);Jb.style.width=Jb.offsetWidth+30+"px";Jb.childNodes[0].childNodes[0].focus();if(g==1){T.subscribe(T.MOUSEDOWN,p.fr);jsx3.sleep(function(){this._jsxTG=false;},null,this);}};q.repaint=function(){this.sj();this.clearCachedContent();return this.jsxsuper();};q.Mn=function(e,b,g){if(e)this.clearCachedContent();if(this._jsxLm==null||b!=null){var mb={};mb.jsxtabindex=this.getIndex()?this.getIndex():0;mb.jsxselectedimage=p.at;mb.jsxtransparentimage=jsx3.gui.Block.SPACE;mb.jsxdragtype="JSX_GENERIC";mb.jsxid=this.getId();mb.jsxsubmenuimage=p.Yg;mb.jsxmode=jsx3.html.getMode();mb.jsxpath=jsx3.getEnv("jsxabspath");mb.jsxpathapps=jsx3.getEnv("jsxhomepath");mb.jsxpathprefix=this.getUriResolver().getUriPrefix();mb.jsxkeycodes=this.Kr(b);if(b!=null)mb.jsxrootid=b;if(g!=null)mb.jsxindex=g;var Qb=this.getXSLParams();for(var S in Qb)mb[S]=Qb[S];var bb=this.doTransform(mb);if(!jsx3.xml.Processor.supports(jsx3.xml.Processor.DISABLE_OUTPUT_ESCAPING))bb=jsx3.html.removeOutputEscapingSpan(bb);bb=bb.doReplace("<[/]*JSX_FF_WELLFORMED_WRAPPER>","");if(bb.trim()==""){var pb="jsx30menu_"+jsx3.html.getMode()+"_itemlist";bb=p.VB.format(pb,"- no data -");}if(b==null){this._jsxLm=bb;}else{return bb;}}return this._jsxLm;};q.Kr=function(o){if(this._jsxkn==null)return "";var Qb=new Array();for(var zc in this._jsxkn){Qb.push(zc+":"+this._jsxkn[zc].getFormatted());}Qb.push("");return Qb.join("|");};q.clearCachedContent=function(){delete this._jsxLm;};q.getState=function(){return this._jsxAr!=null?this._jsxAr:p.AA;};q.Vf=function(o,g){if(g==null)g=this.getRendered(g);if(g!=null){if(o==p.Ww){if(p.Sp==this)return this;if(p.Sp!=null)p.Sp.Vf(p.AA);g.style.backgroundImage="url("+p.Ky+")";g.childNodes[3].style.backgroundColor=p.dv;g.childNodes[2].style.backgroundImage="url("+p.bf+")";p.Sp=this;}else{g.style.backgroundImage="";g.childNodes[3].style.backgroundColor="";g.childNodes[2].style.backgroundImage="url("+p.bu+")";if(p.Sp==this){p.Sp=null;}}}this._jsxAr=o;return this;};q.Kl=function(){if(this._jsxkn!=null){for(var Mc in this._jsxkn)this._jsxkn[Mc].destroy();}this._jsxkn={};var _=this.getId();var Fc=this.getXML();if(Fc!=null){var Hb=Fc.selectNodes("//record[@jsxkeycode]");for(var nb=0;nb<Hb.getLength();nb++){var Rb=Hb.getItem(nb).getAttribute("jsxkeycode");Rb=Rb.toLowerCase();var fb=Hb.getItem(nb).getAttribute("jsxid");var Wb=jsx3.makeCallback(function(i,s){this.Nj(s[0],i);},this,fb);this._jsxkn[fb]=this.doKeyBinding(Wb,Rb);}}};q.Nj=function(a,f){var zb=this.getRecordNode(f);if(zb==null)return;var tb=zb.getParent();var fb=tb!=null&&tb.getNodeName()=="record"?tb.getAttribute("jsxid"):null;var Tb=this.doEvent(sc.MENU,{objEVENT:a,objANCHOR:null,intINDEX:null,strPARENTID:fb});if(Tb===false)return;if(this.isItemEnabled(f))this.Jx(a,f);};p.s5={};p.s5[T.KEYPRESS]=true;p.s5[T.KEYDOWN]=true;p.s5[T.MOUSEDOWN]=true;p.s5[T.MOUSEOUT]=true;p.s5[T.MOUSEOVER]=true;p.s5[T.BLUR]="u2";p.s5[T.FOCUS]="CL";q.k7=function(f,c,l){this.B_(f,c,l,3);};q.T5=function(){this.applyDynamicProperties();var Mc=this.getRelativePosition()!=0;var Ic={};Ic.height=22;if(Mc){var ac=this.getMargin();Ic.margin=ac!=null&&ac!=""?ac:"1 4 1 0";Ic.tagname="span";Ic.boxtype="relativebox";}else{var Sb=this.getLeft();var dc=this.getTop();Ic.left=Sb!=null&&Sb!=""?Sb:0;Ic.top=dc!=null&&dc!=""?dc:0;Ic.tagname="div";Ic.boxtype="box";}if(this.getDivider()==1){Ic.padding="0 0 0 4";Ic.border="0px;0px;0px;solid 1px "+p.dv;}var kb=new jsx3.gui.Painted.Box(Ic);Ic={};Ic.width=this.getImage()!=null&&this.getImage()!=""?22:3;Ic.height=22;Ic.tagname="span";Ic.boxtype="relativebox";var Bc=new jsx3.gui.Painted.Box(Ic);kb.W8(Bc);Ic={};if(jsx3.util.strEmpty(this.getText())){Ic.width=1;}else{Ic.padding="5 4 5 0";}Ic.height=22;Ic.tagname="span";Ic.boxtype="relativebox";var Jc=new jsx3.gui.Painted.Box(Ic);kb.W8(Jc);Ic={};Ic.width=11;Ic.height=22;Ic.tagname="span";Ic.boxtype="relativebox";var cb=new jsx3.gui.Painted.Box(Ic);kb.W8(cb);Ic={};Ic.width=1;Ic.height=22;Ic.tagname="span";Ic.boxtype="relativebox";var A=new jsx3.gui.Painted.Box(Ic);kb.W8(A);return kb;};q.paint=function(){this.applyDynamicProperties();this.Kl();var Zb=this;var Ec=this.getState()==p.Ww?"background-image:url("+p.Ky+");":"";var t=this.T1();var kc=this.MU();var Y=null,mc=null,mb=null;if(this.getEnabled()==jsx3.gui.Form.STATEENABLED){Y=this.lM(p.s5,0);mb="";}else{Y="";mb=jsx3.html.getCSSOpacity(0.4);}if(this.getImage()!=null)mc=this.getUriResolver().resolveURI(this.getImage());var qc=this.renderAttributes(null,true);var ec=this.RL(true);ec.setAttributes("id='"+this.getId()+"' "+"label='"+this.getName()+"' "+this.CI()+this.vH()+Y+" class='jsx30toolbarbutton'"+qc);ec.setStyles(this.I6()+Ec+t+kc+mb+this.d9()+this.iN());var Jc=ec.pQ(0);Jc.setStyles("overflow:hidden;"+(mc!=null?"background-image:url("+mc+");":""));Jc.setAttributes("class='jsx30toolbarbutton_img' unselectable='on'");var Ub=ec.pQ(1);Ub.setAttributes("class='jsx30toolbarbutton_lbl' unselectable='on'");var fb=this.getText();if(fb!=null&&fb!=""){Ub.setStyles(this.QP()+this.oY()+this.g0());}else{fb="&#160;";Ub.setStyles("overflow:hidden;");}var S=ec.pQ(2);S.setStyles("background-image:url("+(this.getState()==p.Ww?p.bf:p.bu)+");");S.setAttributes("class='jsx30toolbarbutton_mnu'");var Gb=ec.pQ(3);Gb.setStyles("overflow:hidden;"+(this.getState()==p.Ww?"background-color:"+p.dv+";":""));Gb.setAttributes("class='jsx30toolbarbutton_cap'");return ec.paint().join(Jc.paint().join("&#160;")+Ub.paint().join(fb)+S.paint().join("&#160;")+Gb.paint().join("&#160;"));};q.UZ=function(){return "background-color:"+(this.getBackgroundColor()?this.getBackgroundColor():p.DEFAULTBACKGROUNDCOLOR)+";";};q.K2=function(){return this.getBackground()?this.getBackground()+";":p.DEFAULTBACKGROUND;};q.I6=function(){return this.getEnabled()==jsx3.gui.Form.STATEENABLED?"cursor:pointer;":"cursor:default;";};q.executeRecord=function(m){this.Jx(this.isOldEventProtocol(),m);return this;};q.Jx=function(h,r){var Pb=null;if((Pb=this.getRecordNode(r))!=null){this._jsxvalue=r;var tc=Pb.getAttribute("jsxexecute");var G=true;var L={strRECORDID:r,objRECORD:Pb};if(h instanceof jsx3.gui.Event)L.objEVENT=h;G=jsx3.util.strEmpty(tc)?true:this.eval(tc,L);if(G!==false&&h)this.doEvent(sc.EXECUTE,L);}};q.redrawRecord=function(){delete this._jsxLm;if(this==p.vt)this.sj();return this;};q.getValue=function(){return this._jsxvalue;};q.doValidate=function(){return this.setValidationState(jsx3.gui.Form.STATEVALID).getValidationState();};q.beep=function(){var fc=this.getRendered();jsx3.gui.F9(fc.childNodes[2],{backgroundImage:"url("+p.qm+")"});jsx3.gui.F9(fc,{backgroundImage:"url("+p.uE+")"});jsx3.gui.F9(fc.childNodes[3],{backgroundColor:"#808080"});return this;};q.onDestroy=function(r){this.jsxsuper(r);this.onDestroyCached(r);};p.getVersion=function(){return "3.0.00";};q.emGetType=function(){return jsx3.gui.Matrix.EditMask.FORMAT;};q.emInit=function(a){this.jsxsupermix(a);this.subscribe(sc.EXECUTE,this,"Mg");};q.emSetValue=function(j){};q.emGetValue=function(){return null;};q.emBeginEdit=function(d,k,g,i,b,l,f){var Lb=f.childNodes[0].childNodes[0];if(Lb){this.jsxsupermix(d,k,g,i,b,l,f);Lb.focus();}else{return false;}};q.emPaintTemplate=function(){this.setEnabled(jsx3.gui.Form.STATEDISABLED);var M=this.paint();this.setEnabled(jsx3.gui.Form.STATEENABLED);var xb=this.paint();return this.PS(xb,M);};q.Mg=function(j){var Jb=this.emGetSession();if(Jb){Jb.td.focus();this.sj(1,true);}};q.containsHtmlElement=function(k){var t=this.jsxsuper(k);if(!t&&this==p.vt){for(var bc=0;bc<p.Te.length&&!t;bc++)t=p.Te[bc].containsHtmlElement(k);}return t;};q.getDivider=function(){return this.jsxdivider!=null?this.jsxdivider:0;};q.setDivider=function(e,r){this.jsxdivider=e;if(r)this.recalcBox(["border","padding"]);else this.C5();return this;};q.emCollapseEdit=function(o){this.sj(1,true);};});jsx3.gui.Menu.prototype.bA=jsx3.gui.ToolbarButton.prototype.mL;jsx3.gui.Menu.prototype.zg=jsx3.gui.ToolbarButton.prototype.CL;jsx3.gui.Menu.prototype.Vu=jsx3.gui.ToolbarButton.prototype.u2;jsx3.Menu=jsx3.gui.Menu;
