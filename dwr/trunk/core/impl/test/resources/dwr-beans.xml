<?xml version="1.0"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <bean id="dwrController" class= "org.directwebremoting.DwrController">
    <property name="webContextBuilder" ref="org.directwebremoting.WebContextBuilder"/>
    <property name="processor" ref="org.directwebremoting.Processor"/>
    <property name="configurators">
      <list>
        <!--
        <bean class="org.directwebremoting.impl.DwrXmlConfigurator">
          <property name="classResourceName" value="/uk/ltd/getahead/dwr/dwr.xml"/>
          <property name="configuration" ref="org.directwebremoting.Configuration"/>
        </bean>
        -->
        <bean class="org.directwebremoting.spring.SpringConfigurator">
          <property name="creatorTypes">
            <map>
              <entry key="none" value="org.directwebremoting.create.NullCreator"/>
              <entry key="new" value="org.directwebremoting.create.NewCreator"/>
              <entry key="spring" value="org.directwebremoting.spring.SpringCreator"/>
              <entry key="script" value="org.directwebremoting.create.ScriptedCreator"/>
              <entry key="struts" value="org.directwebremoting.struts.StrutsCreator"/>
              <entry key="pageflow" value="org.directwebremoting.beehive.PageFlowCreator"/>
            </map>
          </property>
          <property name="converterTypes">
            <map>
              <entry key="null" value="org.directwebremoting.convert.NullConverter"/>
              <entry key="enum" value="org.directwebremoting.convert.EnumConverter"/>
              <entry key="primitive" value="org.directwebremoting.convert.PrimitiveConverter"/>
              <entry key="bignumber" value="org.directwebremoting.convert.BigNumberConverter"/>
              <entry key="string" value="org.directwebremoting.convert.StringConverter"/>
              <entry key="array" value="org.directwebremoting.convert.ArrayConverter"/>
              <entry key="map" value="org.directwebremoting.convert.MapConverter"/>
              <entry key="collection" value="org.directwebremoting.convert.CollectionConverter"/>
              <entry key="date" value="org.directwebremoting.convert.DateConverter"/>
              <entry key="dom" value="org.directwebremoting.convert.DOMConverter"/>
              <entry key="dom4j" value="org.directwebremoting.convert.DOM4JConverter"/>
              <entry key="jdom" value="org.directwebremoting.convert.JDOMConverter"/>
              <entry key="xom" value="org.directwebremoting.convert.XOMConverter"/>
              <entry key="servlet" value="org.directwebremoting.convert.ServletConverter"/>
              <entry key="bean" value="org.directwebremoting.convert.BeanConverter"/>
              <entry key="object" value="org.directwebremoting.convert.ObjectConverter"/>
              <entry key="hibernate" value="org.directwebremoting.hibernate.H2BeanConverter"/>
            </map>
          </property>
          <property name="converters">
            <map>
              <entry key="void" value="null"/>
              <entry key="java.lang.Void" value="null"/>

              <entry key="boolean" value="primitive"/>
              <entry key="byte" value="primitive"/>
              <entry key="short" value="primitive"/>
              <entry key="int" value="primitive"/>
              <entry key="long" value="primitive"/>
              <entry key="float" value="primitive"/>
              <entry key="double" value="primitive"/>
              <entry key="char" value="primitive"/>
              <entry key="java.lang.Boolean" value="primitive"/>
              <entry key="java.lang.Byte" value="primitive"/>
              <entry key="java.lang.Short" value="primitive"/>
              <entry key="java.lang.Integer" value="primitive"/>
              <entry key="java.lang.Long" value="primitive"/>
              <entry key="java.lang.Float" value="primitive"/>
              <entry key="java.lang.Double" value="primitive"/>
              <entry key="java.lang.Character" value="primitive"/>

              <entry key="java.math.BigInteger" value="bignumber"/>
              <entry key="java.math.BigDecimal" value="bignumber"/>

              <entry key="java.lang.String" value="string"/>
              <entry key="java.util.Date" value="date"/>

              <entry key="[Z" value="array"/>
              <entry key="[B" value="array"/>
              <entry key="[S" value="array"/>
              <entry key="[I" value="array"/>
              <entry key="[J" value="array"/>
              <entry key="[F" value="array"/>
              <entry key="[D" value="array"/>
              <entry key="[C" value="array"/>
              <entry key="[L*" value="array"/>

              <!--
              The catch for the next 2 is that we really mean java.util.Collection<String>
              and java.util.Map<String, String> but we need to do more work before this
              syntax is enabled
              -->
              <entry key="java.util.Collection" value="collection"/>
              <entry key="java.util.Map" value="map"/>

              <entry key="org.w3c.dom.Node" value="dom"/>
              <entry key="org.w3c.dom.Element" value="dom"/>
              <entry key="org.w3c.dom.Document" value="dom"/>
              <entry key="org.dom4j.Document" value="dom4j"/>
              <entry key="org.dom4j.Element" value="dom4j"/>
              <entry key="org.dom4j.Node" value="dom4j"/>
              <entry key="org.jdom.Document" value="jdom"/>
              <entry key="org.jdom.Element" value="jdom"/>
              <entry key="nu.xom.Document" value="xom"/>
              <entry key="nu.xom.Element" value="xom"/>
              <entry key="nu.xom.Node" value="xom"/>

              <entry key="javax.servlet.ServletConfig" value="servlet"/>
              <entry key="javax.servlet.ServletContext" value="servlet"/>
              <entry key="javax.servlet.http.HttpServletRequest" value="servlet"/>
              <entry key="javax.servlet.http.HttpServletResponse" value="servlet"/>
              <entry key="javax.servlet.http.HttpSession" value="servlet"/>
            </map>
          </property>
        </bean>
        <!-- We'd like to do something like this:
        <bean class="org.directwebremoting.impl.DwrXmlConfigurator">
          <property name="servletContext" ref="dwrController.servletContext"/>
          <property name="servletResourceName" value="/WEB-INF/dwr.xml"/>
        </bean>
        -->
        <!--
        <bean class="org.directwebremoting.impl.DwrXmlConfigurator">
          <property name="classResourceName" value="/dwr.xml"/>
          <property name="configuration" ref="org.directwebremoting.Configuration"/>
        </bean>
        -->
        <bean class="org.directwebremoting.spring.SpringConfigurator">
          <property name="creators">
            <map>
              <entry key="Demo">
                <bean class="org.directwebremoting.spring.CreatorConfig">
                  <property name="creator" value="spring"/>
                  <property name="params">
                    <map>
                      <entry key="beanName" value="demo"/>
                    </map>
                  </property>
                </bean>
              </entry>
            </map>
          </property>
          <property name="converters">
            <map>
              <entry key="bean" value="org.directwebremotingexample.Demo$Person"/>
            </map>
          </property>
        </bean>
      </list>
    </property>
  </bean>

  <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
      <props>
        <prop key="/**/*">dwrController</prop>
      </props>
    </property>
  </bean>

  <bean id="org.directwebremoting.extend.AccessControl" class="org.directwebremoting.impl.DefaultAccessControl">
  </bean>

  <bean id="org.directwebremoting.Configuration" class="org.directwebremoting.impl.DefaultConfiguration">
    <property name="accessControl" ref="org.directwebremoting.extend.AccessControl"/>
    <property name="ajaxFilterManager" ref="org.directwebremoting.extend.AjaxFilterManager"/>
    <property name="converterManager" ref="org.directwebremoting.extend.ConverterManager"/>
    <property name="creatorManager" ref="org.directwebremoting.extend.CreatorManager"/>
  </bean>

  <bean id="org.directwebremoting.extend.ConverterManager" class="org.directwebremoting.impl.DefaultConverterManager">
  </bean>

  <bean id="org.directwebremoting.extend.CreatorManager" class="org.directwebremoting.impl.DefaultCreatorManager">
    <property name="debug" value="true"/>
  </bean>

  <bean id="org.directwebremoting.Processor" class="org.directwebremoting.impl.DefaultProcessor">
    <property name="index" ref="index"/>
    <property name="test" ref="test"/>
    <property name="interface" ref="interface"/>
    <property name="exec" ref="exec"/>
    <property name="file" ref="file"/>
  </bean>

  <bean id="org.directwebremoting.WebContextBuilder" class="org.directwebremoting.impl.DefaultWebContextBuilder">
  </bean>

  <bean id="org.directwebremoting.extend.AjaxFilterManager" class="org.directwebremoting.impl.DefaultAjaxFilterManager">
  </bean>

  <bean id="index" class="org.directwebremoting.impl.DefaultIndexProcessor">
    <property name="creatorManager" ref="org.directwebremoting.extend.CreatorManager"/>
  </bean>

  <bean id="test" class="org.directwebremoting.impl.DefaultTestProcessor">
    <property name="accessControl" ref="org.directwebremoting.extend.AccessControl"/>
    <property name="converterManager" ref="org.directwebremoting.extend.ConverterManager"/>
    <property name="creatorManager" ref="org.directwebremoting.extend.CreatorManager"/>
    <property name="allowImpossibleTests" value="false"/>
  </bean>

  <bean id="interface" class="org.directwebremoting.impl.DefaultInterfaceProcessor">
    <property name="accessControl" ref="org.directwebremoting.extend.AccessControl"/>
    <property name="creatorManager" ref="org.directwebremoting.extend.CreatorManager"/>
    <property name="allowImpossibleTests" value="false"/>
  </bean>

  <bean id="exec" class="org.directwebremoting.impl.DefaultExecProcessor">
    <property name="accessControl" ref="org.directwebremoting.extend.AccessControl"/>
    <property name="ajaxFilterManager" ref="org.directwebremoting.extend.AjaxFilterManager"/>
    <property name="converterManager" ref="org.directwebremoting.extend.ConverterManager"/>
    <property name="creatorManager" ref="org.directwebremoting.extend.CreatorManager"/>
  </bean>

  <bean id="file" class="org.directwebremoting.impl.FileProcessor">
    <property name="scriptCompressed" value="true"/>
    <property name="ignoreLastModified" value="false"/>
  </bean>

</beans>
