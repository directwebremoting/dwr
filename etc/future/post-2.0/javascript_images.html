<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/REC-html401/strict.dtd">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<!-- base href="http://developer.irt.org/script/955.htm" --><title>Q955 Can I manipulate images a pixel at a time?</title><link rel="stylesheet" href="javascript_images_files/faq.css" type="text/css"><meta name="Keywords" content="Q955 Can I manipulate images a pixel at a time?" lang="en"><meta name="Description" content="irt.org FAQ Knowledge Base" lang="en"><meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.rsac.org/ratingsv01.html&quot; l gen true comment &quot;RSACi North America Server&quot; for &quot;http://www.irt.org/&quot; on &quot;1998.08.13T14:43-0800&quot; r (n 0 s 0 v 0 l 0))"><meta http-equiv="PICS-Label" content="(PICS-1.1 &quot;http://www.classify.org/safesurf/&quot; l gen true for &quot;http://www.irt.org/&quot; by &quot;martin@irt.org&quot; r (SS~~000 1))"></head><body><table border="1" width="100%"><tbody><tr><td><table color="#ffffff" bgcolor="#ffffff" border="1" cellpadding="10" cellspacing="0" width="100%"><tbody><tr><td><font color="black" face="" size="-1">This is <b><font color="#0039b6">G</font> <font color="#c41200">o</font> <font color="#f3c518">o</font> <font color="#0039b6">g</font> <font color="#30a72f">l</font> <font color="#c41200">e</font></b>'s <a href="http://www.google.com/help/features.html#cached"><font color="blue">cache</font></a> of <a href="http://developer.irt.org/script/955.htm"><font color="blue">http://developer.irt.org/script/955.htm</font></a> as retrieved on 7 Jan 2005 18:33:54 GMT.<br>
<b><font color="#0039b6">G</font> <font color="#c41200">o</font> <font color="#f3c518">o</font> <font color="#0039b6">g</font> <font color="#30a72f">l</font> <font color="#c41200">e</font></b>'s cache is the snapshot that we took of the page as we crawled the web.<br>
The page may have changed since that time.  Click here for the <a href="http://developer.irt.org/script/955.htm"><font color="blue">current page</font></a> without highlighting.<br>
This cached page may reference images which are no longer available. Click here for the <a href="http://66.249.93.104/search?q=cache:i1b-wWvN0OkJ:developer.irt.org/script/955.htm+&amp;hl=en&amp;lr=&amp;strip=1"><font color="blue">cached text</font></a> only.<br>To link to or bookmark this page, use the following url: <code>http://www.google.com/search?q=cache:i1b-wWvN0OkJ:developer.irt.org/script/955.htm+&amp;hl=en&amp;gl=uk&amp;ct=clnk&amp;cd=1</code></font><br><br><center><font size="-2"><i>Google is neither affiliated with the authors of this page nor responsible for its content.</i></font></center></td></tr></tbody></table></td></tr></tbody></table>
<hr>












<!--htdig_noindex-->

<!-- meta name="robots" content="index, nofollow" -->




<!-- header advert placeholder start -->
<!-- header advert placeholder end -->



<!-- top of page advert start -->
<script type="text/javascript"><!--
google_ad_client = "pub-2749921657072724";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_channel ="";
google_ad_type = "text_image";
//--></script>
<center>
<script type="text/javascript" src="javascript_images_files/show_ads.js"></script><iframe name="google_ads_frame" src="javascript_images_files/ads.htm" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" frameborder="0" height="90" scrolling="no" width="728"></iframe>
</center>
<br>
<!-- top of page advert end -->

<table cellpadding="0" cellspacing="0" width="100%">
<tbody><tr><th class="highlight" colspan="2">Q955 Can I manipulate images a pixel at a time?</th></tr>
<tr>

<td align="center" valign="top" width="170"><a href="http://www.irt.org/index.htm"><img src="javascript_images_files/irt-sm.gif" alt="irt.org logo" align="middle" border="0" height="60" width="135"></a></td>

<td align="right" valign="middle">

<a href="http://www.irt.org/index.htm"><span class="h-home">Home</span></a>
<a href="http://tech.irt.org/articles.htm"><span class="h-article">Articles</span></a>
<a href="http://developer.irt.org/faq.htm"><span class="h-faq">FAQs</span></a>
<a href="http://www.irt.org/xref/index.htm"><span class="h-xref">Xref</span></a>
<a href="http://www.irt.org/games/index.htm"><span class="h-game">Games</span></a>
<!-- <a href="http://www.irt.org/discus/messages/board-topics.html"><span class="h-bbs">BBS</span></a> -->
<!-- <a href="http://www.irt.org/links/index.html"><span class="h-resource">Resources</span></a> -->
<!-- <a href="http://www.irt.org/cgi-bin/foldoc.pl"><span class="h-dictionary">Dictionary</span></a> -->
<a href="http://www.irt.org/software/index.htm"><span class="h-software">Software</span></a>
<!-- <a href="http://www.irt.org/cgi-bin/news"><span class="h-news">News</span></a> -->
<a href="http://www.irt.org/books/index.htm"><span class="h-book">Books</span></a>
<a href="http://www.irt.org/download/index.htm"><span class="h-download">Downloads</span></a>
<a href="http://www.irt.org/about/index.htm"><span class="h-about">About</span></a>
<!-- <a href="http://www.irt.org/beta/index.htm"><span class="h-beta">Beta</span></a> -->
<!-- <<a href="http://www.irt.org/search.htm"><span class="h-search">Find</span></a> -->
<a href="http://www.irt.org/sitemap.htm"><span class="h-sitemap">Site&nbsp;Map</span></a>

</td>

</tr></tbody></table>

<img src="javascript_images_files/dot.gif" height="1" width="590">

<!--/htdig_noindex-->

<p><strong><a href="http://developer.irt.org/index.htm">irt.org</a> | <a href="http://developer.irt.org/faq.htm">Knowledge Base</a> | <a href="http://developer.irt.org/script/script.htm">JavaScript</a> | <a href="http://developer.irt.org/script/image.htm">Image</a> | Q955 [ <a href="http://developer.irt.org/script/954.htm">previous</a> <a href="http://developer.irt.org/script/956.htm">next</a> ]</strong></p>

<p>
JavaScript 1.0 and 1.1 has no ability to support byte 0 (null) within
a string.
</p>

<p>
Therefore you cannot 'create' images that require \0, even if they
can be specified using ascii characters.  The only images that you can
create are XBM images which are only black or white.
</p>

<p>
Here is an example of an XBM image.  It script creates a one pixel by
one pixel XBM image, which it then uses to inform you of the size of
the document.
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;body onLoad="init()"&gt;

&lt;script language="JavaScript"&gt;&lt;!--
var single_pixel_xbm = "#define x_width 1\n#define x_height 1\nstatic char x_bits = {0x00};\n";
function init() { alert("width = " + document.images[0].width + "\n" + "height = " + document.images[0].height); }
//--&gt;&lt;/script&gt;

&lt;img src="javascript:single_pixel_xbm" width="100%" height="100%"&gt;
</pre></td></tr></tbody></table>

<p>
The following example demonstrates image creating and manipulation:
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script language="JavaScript"&gt;&lt;!--
var image1 = '#define x_width 16\n#define x_height 16\nstatic char x_bits[] = {\n' +
' 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55};\n';

var image2 = '#define x_width 16\n#define x_height 16\nstatic char x_bits[] = {\n' +
' 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff};\n';
//--&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;img name="myImage" src="javascript:image1" width="16" height="16"&gt;

&lt;form&gt;
&lt;input type="button" onClick="if (document.images) myImage.src='javascript:image1'" value="Show Image 1"&gt;
&lt;input type="button" onClick="if (document.images) myImage.src='javascript:image2'" value="Show Image 2"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr></tbody></table>

<p>
In JavaScript 1.2, the following can be achieved (tested in JavaScript
1.2 in Netscape Navigator 4.5 on GNU/Linux):
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;script language="JavaScript"&gt;&lt;!--
gif = 'GIF87a \0\20\0\200\0\0\0\0\0\377\377\377,\0\0\0\0 \0\20'+
      '\0\0\2 \214\217\251\313\355\17\243D\240\326\11\1\236zG\333y\231'+
      '8\222J\30\232\7\252\236W\13\307\362\274\25\0;';
//--&gt;&lt;/script&gt;

&lt;img name="myImage" src="javascript:gif" width="32" height="32"&gt;
</pre></td></tr></tbody></table>

<p>
I suspect that the above will still cause older browsers to crash.
</p>

<p>
If you need to place the image in another window, then rather than
using document.open('image/gif'), which causes the browser to crash,
use something like:
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;script language="JavaScript"&gt;&lt;!--
gif = 'GIF87a \0\20\0\200\0\0\0\0\0\377\377\377,\0\0\0\0 \0\20'+
      '\0\0\2 \214\217\251\313\355\17\243D\240\326\11\1\236zG\333y\231'+
      '8\222J\30\232\7\252\236W\13\307\362\274\25\0;';

windowHandle = window.open('about:blank','windowName','width=100,height=100');
if (!windowHandle.opener)
    windowHandle.opener = self;
windowHandle.document.open();
windowHandle.document.write('&lt;img name="myImage" src="javascript:opener.gif" width="100" height="100"&gt;');
windowHandle.document.close();
//--&gt;&lt;/script&gt;
</pre></td></tr></tbody></table>

<p>
The previous image is created using the following JavaScript to
define the image source:
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;script language="JavaScript"&gt;&lt;!--
gif1 = 'GIF87a \0\20\0\200\0\0\0\0\0\377\377\377,\0\0\0\0 \0\20\0\0\2 \214\217\251\313\355\17\243D\240\326\11\1\236zG\333y\2318\222J\30\232\7\252\236W\13\307\362\274\25\0;';
//--&gt;&lt;/script&gt;
</pre></td></tr></tbody></table>

<p>
On the latest browsers this should render as a black number 5 on
a white background.  The image source was given to me by someone on
usenet.
</p>

<p>
Saving the source of the above image to disk and then loading the
image into a hex editor reveals something that looks similar to:
</p>

<pre>00000000  4749 4638 3761 2000 1000 8000 0000 0000  GIF87a ... .....
00000010  FFFF FF2C 0000 0000 2000 1000 0002 208C  ÿÿÿ,.... .....
00000020  8FA9 CBED 0FA3 44A0 D609 019E 7A47 DB79  ©Ëí. £D&nbsp;Ö.. zGÛy
00000030  9938 924A 189A 07AA 9E57 0BC7 F2BC 1500   8 J. .ª W.Çò¼..
00000040  3B0A                                     ;...............
</pre>

<p>
Therefore, one could assume that the hex data that makes up the image
is:
</p>

<pre>47494638376120001000800000000000FFFFFF2C00000000200010000002208C8FA9CBED0FA344A0D609019E7A47DB799938924A189A07AA9E570BC7F2BC15003B0A
</pre>

<p>
Using JavaScript, we can attempt to store this data as a string, and
then convert it to the format similar to the one used in the first
example.
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;script language="JavaScript"&gt;&lt;!--
function binary(d) {
    var o = '';
    for (var i=0; i&lt;d.length; i=i+2) o+=String.fromCharCode(eval('0x'+(d.substring(i,i+2)).toString(16)));
    return o;
}

gif2 = binary('47494638376120001000800000000000FFFFFF2C00000000200010000002208C8FA9CBED0FA344A0D609019E7A47DB799938924A189A07AA9E570BC7F2BC15003B0A');
//--&gt;&lt;/script&gt;
</pre></td></tr></tbody></table>

<p>
And then used as:
</p>

<table class="code" width="100%"><tbody><tr><td>
<pre>&lt;img src="javascript:gif2"&gt; or
&lt;img src="javascript:binary('47494638376120001000800000000000ffffff2c00000000200010000002208c8fa9cbed0fa344a0d609019e7a47db799938924a189a07aa9e570bc7f2bc15003b0a')"&gt;
</pre></td></tr></tbody></table>





<!--htdig_noindex-->

<hr>

<table cellpadding="0" cellspacing="0">

<tbody><tr><td valign="top">

<br>

<!-- bottom of page left hand side advert start -->
<!-- script src="http://rcm.amazon.com/e/cm?t=irtorgcoversinte&l=st1&search=pda&mode=electronics&p=8&o=1" type="text/JavaScript"></script -->
<!-- bottom of page left hand side advert end -->

</td><td align="right" valign="top" width="100%">

<table width="100%"><tbody><tr><td width="300">

<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table bgcolor="#ffffff" border="0">
<tbody><tr><!--<td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google"></img></a>
</td>-->
<td nowrap="nowrap">
<input name="domains" value="irt.org" type="hidden">
<input name="q" size="31" maxlength="255" value="" type="text">
<input name="sa" value="Search" type="submit">
</td></tr>
<tr>
<!--<td>&nbsp;</td>-->
<td nowrap="nowrap">
<table>
<tbody><tr>
<td>
<input name="sitesearch" value="irt.org" checked="checked" type="radio">
<font color="#000000" size="-1">irt.org</font>
</td>
<td>
<input name="sitesearch" value="" type="radio">
<font color="#000000" size="-1">Web</font>
</td>
</tr>
</tbody></table>
<input name="client" value="pub-2749921657072724" type="hidden">
<input name="forid" value="1" type="hidden">
<input name="ie" value="ISO-8859-1" type="hidden">
<input name="oe" value="ISO-8859-1" type="hidden">
<input name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:135;L:http://www.irt.org/images/irt-adsense.gif;S:http://www.irt.org/;FORID:1;" type="hidden">
<input name="hl" value="en" type="hidden">

</td></tr></tbody></table>
</form>
<!-- SiteSearch Google -->

</td><td>

<!-- Begin PayPal Logo -->
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"><p align="center"><strong>Support irt.org</strong><br><input name="cmd" value="_xclick" type="hidden"><input name="business" value="donations@irt.org" type="hidden"><input name="item_name" value="irt.org donations" type="hidden"><input name="item_number" value="irt-donate-001" type="hidden"><input name="no_shipping" value="1" type="hidden"><input name="return" value="http://www.irt.org/about/index.htm" type="hidden"><input name="cancel_return" value="http://www.irt.org/about/index.htm" type="hidden"><input src="javascript_images_files/x-click-but21.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!" border="0" type="image"></p></form>
<!-- End PayPal Logo -->

</td><td width="300">

<!-- near bottom of page right hand side advert start -->
<script type="text/javascript"><!--
google_ad_client = "pub-2749921657072724";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_channel ="";
google_ad_type = "text_image";
//--></script>
<script type="text/javascript" src="javascript_images_files/show_ads.js"></script><iframe name="google_ads_frame" src="javascript_images_files/ads_002.htm" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" frameborder="0" height="250" scrolling="no" width="300"></iframe>
<!-- near bottom of page right hand side advert end -->

</td></tr></tbody></table>

<p align="center">
<a href="http://www.irt.org/utility/question.htm"><strong>Ask A Question</strong></a> / <a href="http://www.irt.org/utility/answer.htm"><strong>Send an Answer</strong></a>
</p>

<div class="center">
<small>
Last Updated: 23rd December 2004. Maintained by: <a href="mailto:martin@irt.org">Martin Webb</a> and <a href="mailto:michel@irt.org">Michel Plungjan</a>. Copyright © 1996-2005 irt.org, All Rights Reserved.
<br>
irt.org <a href="http://www.irt.org/utility/smprint.htm#liability">liability</a>,
trademark,
<a href="http://www.irt.org/utility/smprint.htm#copyright">document use</a>,
<a href="http://www.irt.org/utility/smprint.htm#privacy">privacy statement</a> and
<a href="http://www.irt.org/utility/smprint.htm#software">software licensing rules</a> apply.
</small>
</div>

</td><td valign="top">

<br>

<!-- bottom of page right hand side advert start -->
<!-- bottom of page right hand side advert end -->

</td></tr></tbody></table>

<!-- bottom of page advert start -->
<!-- bottom of page advert end -->

<!--/htdig_noindex-->

</body></html>